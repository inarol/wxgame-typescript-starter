!function(e,t){for(var n in t)e[n]=t[n]}(exports,function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=5)}([function(e,t){e.exports=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}},function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}e.exports=function(e,t,o){return t&&n(e.prototype,t),o&&n(e,o),e}},function(e,t){!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={exports:{},id:o,loaded:!1};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.c=t,n.p="",n(0)}([function(e,t,n){"use strict";var o,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),r=n(5);(o=r)&&o.__esModule;var a=GameGlobal;GameGlobal.__isAdapterInjected||(GameGlobal.__isAdapterInjected=!0,function(){if(i.addEventListener=function(e,t){i.document.addEventListener(e,t)},i.removeEventListener=function(e,t){i.document.removeEventListener(e,t)},i.canvas&&(i.canvas.addEventListener=i.addEventListener,i.canvas.removeEventListener=i.removeEventListener),"devtools"===wx.getSystemInfoSync().platform){for(var e in i){var t=Object.getOwnPropertyDescriptor(a,e);t&&!0!==t.configurable||Object.defineProperty(window,e,{value:i[e]})}for(var n in i.document){var o=Object.getOwnPropertyDescriptor(a.document,n);o&&!0!==o.configurable||Object.defineProperty(a.document,n,{value:i.document[n]})}window.parent=window}else{for(var r in i)a[r]=i[r];a.window=i,window=a,window.top=window.parent=window}}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cancelAnimationFrame=t.requestAnimationFrame=t.clearInterval=t.clearTimeout=t.setInterval=t.setTimeout=t.canvas=t.location=t.localStorage=t.HTMLElement=t.FileReader=t.Audio=t.Image=t.WebSocket=t.XMLHttpRequest=t.navigator=t.document=void 0;var o=n(2);Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var i=n(4);Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var r=y(n(10)),a=y(n(11)),u=y(n(18)),s=y(n(19)),c=y(n(20)),l=y(n(12)),f=y(n(13)),h=y(n(21)),d=y(n(5)),p=y(n(22)),v=y(n(23));function y(e){return e&&e.__esModule?e:{default:e}}t.document=a.default,t.navigator=u.default,t.XMLHttpRequest=s.default,t.WebSocket=c.default,t.Image=l.default,t.Audio=f.default,t.FileReader=h.default,t.HTMLElement=d.default,t.localStorage=p.default,t.location=v.default;var g=new r.default;t.canvas=g,t.setTimeout=setTimeout,t.setInterval=setInterval,t.clearTimeout=clearTimeout,t.clearInterval=clearInterval,t.requestAnimationFrame=requestAnimationFrame,t.cancelAnimationFrame=cancelAnimationFrame},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performance=t.ontouchend=t.ontouchmove=t.ontouchstart=t.screen=t.devicePixelRatio=t.innerHeight=t.innerWidth=void 0;var o,i=n(3),r=(o=i)&&o.__esModule?o:{default:o};var a=wx.getSystemInfoSync(),u=a.screenWidth,s=a.screenHeight,c=a.devicePixelRatio,l=t.innerWidth=u,f=t.innerHeight=s;t.devicePixelRatio=c;t.screen={availWidth:l,availHeight:f},t.ontouchstart=null,t.ontouchmove=null,t.ontouchend=null;t.performance=r.default},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=void 0;if(wx.getPerformance){var o=wx.getSystemInfoSync().platform,i=wx.getPerformance(),r=i.now(),a=Object.assign({},i,{now:function(){return(i.now()-r)/1e3}});n="devtools"===o?i:a}t.default=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HTMLCanvasElement=t.HTMLImageElement=void 0;var o,i=n(5),r=(o=i)&&o.__esModule?o:{default:o};function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}t.HTMLImageElement=function(e){function t(){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"img"))}return s(t,r.default),t}(),t.HTMLCanvasElement=function(e){function t(){return a(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"canvas"))}return s(t,r.default),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(6),a=(o=r)&&o.__esModule?o:{default:o},u=n(9),s=n(2);var c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.className="",n.childern=[],n.style={width:s.innerWidth+"px",height:s.innerHeight+"px"},n.insertBefore=u.noop,n.innerHTML="",n.tagName=e.toUpperCase(),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"setAttribute",value:function(e,t){this[e]=t}},{key:"getAttribute",value:function(e){return this[e]}},{key:"getBoundingClientRect",value:function(){return{top:0,left:0,width:s.innerWidth,height:s.innerHeight}}},{key:"focus",value:function(){}},{key:"clientWidth",get:function(){var e=parseInt(this.style.fontSize,10)*this.innerHTML.length;return Number.isNaN(e)?0:e}},{key:"clientHeight",get:function(){var e=parseInt(this.style.fontSize,10);return Number.isNaN(e)?0:e}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(7),r=(o=i)&&o.__esModule?o:{default:o};var a=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.className="",e.children=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(8),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.childNodes=[],e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"appendChild",value:function(e){if(!(e instanceof t))throw new TypeError("Failed to executed 'appendChild' on 'Node': parameter 1 is not of type 'Node'.");this.childNodes.push(e)}},{key:"cloneNode",value:function(){var e=Object.create(this);return Object.assign(e,this),e}},{key:"removeChild",value:function(e){var t=this.childNodes.findIndex(function(t){return t===e});return t>-1?this.childNodes.splice(t,1):null}}]),t}();t.default=u},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var o=new WeakMap,i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),o.set(this,{})}return n(e,[{key:"addEventListener",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=o.get(this);i||(i={},o.set(this,i)),i[e]||(i[e]=[]),i[e].push(t),n.capture&&console.warn("EventTarget.addEventListener: options.capture is not implemented."),n.once&&console.warn("EventTarget.addEventListener: options.once is not implemented."),n.passive&&console.warn("EventTarget.addEventListener: options.passive is not implemented.")}},{key:"removeEventListener",value:function(e,t){var n=o.get(this)[e];if(n&&n.length>0)for(var i=n.length;i--;i>0)if(n[i]===t){n.splice(i,1);break}}},{key:"dispatchEvent",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=o.get(this)[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e)}}]),e}();t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=wx.createCanvas();e.type="canvas",e.__proto__.__proto__=new o.default("canvas");e.getContext;return e.getBoundingClientRect=function(){return{top:0,left:0,width:window.innerWidth,height:window.innerHeight}},e};n(4);var o=i(n(5));i(n(11));function i(e){return e&&e.__esModule?e:{default:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=s(n(5)),r=s(n(12)),a=s(n(13)),u=s(n(10));function s(e){return e&&e.__esModule?e:{default:e}}n(16);var c={},l={readyState:"complete",visibilityState:"visible",documentElement:o,hidden:!1,style:{},location:o.location,ontouchstart:null,ontouchmove:null,ontouchend:null,head:new i.default("head"),body:new i.default("body"),createElement:function(e){return"canvas"===e?new u.default:"audio"===e?new a.default:"img"===e?new r.default:new i.default(e)},getElementById:function(e){return e===o.canvas.id?o.canvas:null},getElementsByTagName:function(e){return"head"===e?[l.head]:"body"===e?[l.body]:"canvas"===e?[o.canvas]:[]},getElementsByName:function(e){return"head"===e?[l.head]:"body"===e?[l.body]:"canvas"===e?[o.canvas]:[]},querySelector:function(e){return"head"===e?l.head:"body"===e?l.body:"canvas"===e?o.canvas:e==="#"+o.canvas.id?o.canvas:null},querySelectorAll:function(e){return"head"===e?[l.head]:"body"===e?[l.body]:"canvas"===e?[o.canvas]:[]},addEventListener:function(e,t){c[e]||(c[e]=[]),c[e].push(t)},removeEventListener:function(e,t){var n=c[e];if(n&&n.length>0)for(var o=n.length;o--;o>0)if(n[o]===t){n.splice(o,1);break}},dispatchEvent:function(e){var t=c[e.type];if(t)for(var n=0;n<t.length;n++)t[n](e)}};t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){return wx.createImage()}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(14),a=(o=r)&&o.__esModule?o:{default:o};var u=0,s=1,c=2,l=3,f=4,h=new WeakMap,d=new WeakMap,p=(new WeakMap,new WeakMap,function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));n.HAVE_NOTHING=u,n.HAVE_METADATA=s,n.HAVE_CURRENT_DATA=c,n.HAVE_FUTURE_DATA=l,n.HAVE_ENOUGH_DATA=f,n.readyState=u,d.set(n,"");var o=wx.createInnerAudioContext();return h.set(n,o),o.onCanplay(function(){n.dispatchEvent({type:"load"}),n.dispatchEvent({type:"loadend"}),n.dispatchEvent({type:"canplay"}),n.dispatchEvent({type:"canplaythrough"}),n.dispatchEvent({type:"loadedmetadata"}),n.readyState=c}),o.onPlay(function(){n.dispatchEvent({type:"play"})}),o.onPause(function(){n.dispatchEvent({type:"pause"})}),o.onEnded(function(){n.dispatchEvent({type:"ended"}),n.readyState=f}),o.onError(function(){n.dispatchEvent({type:"error"})}),e&&(h.get(n).src=e),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"load",value:function(){console.warn("HTMLAudioElement.load() is not implemented.")}},{key:"play",value:function(){h.get(this).play()}},{key:"pause",value:function(){h.get(this).pause()}},{key:"canPlayType",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return"string"!=typeof e?"":e.indexOf("audio/mpeg")>-1||e.indexOf("audio/mp4")?"probably":""}},{key:"cloneNode",value:function(){var e=new t;return e.loop=h.get(this).loop,e.autoplay=h.get(this).autoplay,e.src=this.src,e}},{key:"currentTime",get:function(){return h.get(this).currentTime},set:function(e){h.get(this).seek(e)}},{key:"src",get:function(){return d.get(this)},set:function(e){d.set(this,e),h.get(this).src=e}},{key:"loop",get:function(){return h.get(this).loop},set:function(e){h.get(this).loop=e}},{key:"autoplay",get:function(){return h.get(this).autoplay},set:function(e){h.get(this).autoplay=e}},{key:"paused",get:function(){return h.get(this).paused}}]),t}());t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=n(15),r=(o=i)&&o.__esModule?o:{default:o};var a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"audio"))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.default),t}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),r=n(5),a=(o=r)&&o.__esModule?o:{default:o};var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.default),i(t,[{key:"addTextTrack",value:function(){}},{key:"captureStream",value:function(){}},{key:"fastSeek",value:function(){}},{key:"load",value:function(){}},{key:"pause",value:function(){}},{key:"play",value:function(){}}]),t}();t.default=u},function(e,t,n){"use strict";n(17)},function(e,t,n){"use strict";var o,i=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),r=n(11),a=(o=r)&&o.__esModule?o:{default:o},u=n(9);var s=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.target=i.canvas,this.currentTarget=i.canvas,this.touches=[],this.targetTouches=[],this.changedTouches=[],this.preventDefault=u.noop,this.stopPropagation=u.noop,this.type=t};function c(e){return function(t){var n=new s(e);n.touches=t.touches,n.targetTouches=Array.prototype.slice.call(t.touches),n.changedTouches=t.changedTouches,n.timeStamp=t.timeStamp,a.default.dispatchEvent(n)}}wx.onTouchStart(c("touchstart")),wx.onTouchMove(c("touchmove")),wx.onTouchEnd(c("touchend")),wx.onTouchCancel(c("touchcancel"))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(9),i={platform:wx.getSystemInfoSync().platform,language:"zh-cn",appVersion:"5.0 (iPhone; CPU iPhone OS 9_1 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13B143 Safari/601.1",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 10_3_1 like Mac OS X) AppleWebKit/603.1.30 (KHTML, like Gecko) Mobile/14E8301 MicroMessenger/6.6.0 MiniGame NetType/WIFI Language/zh_CN",onLine:!0,geolocation:{getCurrentPosition:o.noop,watchPosition:o.noop,clearWatch:o.noop}};t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var o=new WeakMap,i=new WeakMap,r=new WeakMap,a=new WeakMap,u=new WeakMap;function s(e){if("function"==typeof this["on"+e]){for(var t=arguments.length,n=Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];this["on"+e].apply(this,n)}}function c(e){this.readyState=e,s.call(this,"readystatechange")}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.onabort=null,this.onerror=null,this.onload=null,this.onloadstart=null,this.onprogress=null,this.ontimeout=null,this.onloadend=null,this.onreadystatechange=null,this.readyState=0,this.response=null,this.responseText=null,this.responseType="",this.responseXML=null,this.status=0,this.statusText="",this.upload={},this.withCredentials=!1,r.set(this,{"content-type":"application/x-www-form-urlencoded"}),a.set(this,{})}return n(e,[{key:"abort",value:function(){var e=u.get(this);e&&e.abort()}},{key:"getAllResponseHeaders",value:function(){var e=a.get(this);return Object.keys(e).map(function(t){return t+": "+e[t]}).join("\n")}},{key:"getResponseHeader",value:function(e){return a.get(this)[e]}},{key:"open",value:function(t,n){i.set(this,t),o.set(this,n),c.call(this,e.OPENED)}},{key:"overrideMimeType",value:function(){}},{key:"send",value:function(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(this.readyState!==e.OPENED)throw new Error("Failed to execute 'send' on 'XMLHttpRequest': The object's state must be OPENED.");wx.request({data:n,url:o.get(this),method:i.get(this),header:r.get(this),responseType:this.responseType,success:function(n){var o=n.data,i=n.statusCode,r=n.header;if("string"!=typeof o&&!(o instanceof ArrayBuffer))try{o=JSON.stringify(o)}catch(e){o=o}if(t.status=i,a.set(t,r),s.call(t,"loadstart"),c.call(t,e.HEADERS_RECEIVED),c.call(t,e.LOADING),t.response=o,o instanceof ArrayBuffer){t.responseText="";for(var u=new Uint8Array(o),l=u.byteLength,f=0;f<l;f++)t.responseText+=String.fromCharCode(u[f])}else t.responseText=o;c.call(t,e.DONE),s.call(t,"load"),s.call(t,"loadend")},fail:function(e){var n=e.errMsg;-1!==n.indexOf("abort")?s.call(t,"abort"):s.call(t,"error",n),s.call(t,"loadend")}})}},{key:"setRequestHeader",value:function(e,t){var n=r.get(this);n[e]=t,r.set(this,n)}}]),e}();l.UNSEND=0,l.OPENED=1,l.HEADERS_RECEIVED=2,l.LOADING=3,l.DONE=4,t.default=l},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var o=new WeakMap,i=function(){function e(t){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.binaryType="",this.bufferedAmount=0,this.extensions="",this.onclose=null,this.onerror=null,this.onmessage=null,this.onopen=null,this.protocol="",this.readyState=3,"string"!=typeof t||!/(^ws:\/\/)|(^wss:\/\/)/.test(t))throw new TypeError("Failed to construct 'WebSocket': The URL '"+t+"' is invalid");this.url=t,this.readyState=e.CONNECTING;var r=wx.connectSocket({url:t,protocols:Array.isArray(i)?i:[i]});return o.set(this,r),r.onClose(function(t){n.readyState=e.CLOSED,"function"==typeof n.onclose&&n.onclose(t)}),r.onMessage(function(e){"function"==typeof n.onmessage&&n.onmessage(e)}),r.onOpen(function(){n.readyState=e.OPEN,"function"==typeof n.onopen&&n.onopen()}),r.onError(function(e){"function"==typeof n.onerror&&n.onerror(new Error(e.errMsg))}),this}return n(e,[{key:"close",value:function(t,n){this.readyState=e.CLOSING,o.get(this).close({code:t,reason:n})}},{key:"send",value:function(e){if("string"!=typeof e&&!(e instanceof ArrayBuffer))throw new TypeError("Failed to send message: The data "+e+" is invalid");o.get(this).send({data:e})}}]),e}();i.CONNECTING=0,i.OPEN=1,i.CLOSING=2,i.CLOSED=3,t.default=i},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,[{key:"construct",value:function(){}}]),e}();t.default=o},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={get length(){return wx.getStorageInfoSync().keys.length},key:function(e){return wx.getStorageInfoSync().keys[e]},getItem:function(e){return wx.getStorageSync(e)},setItem:function(e,t){return wx.setStorageSync(e,t)},removeItem:function(e){wx.removeStorageSync(e)},clear:function(){wx.clearStorageSync()}};t.default=n},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={href:"game.js",reload:function(){}}}])},,function(e,t,n){"use strict";n.r(t);n(3);var o=n(2),i=n.n(o),r=n(1),a=n.n(r),u=n(0),s=n.n(u),c=window.innerWidth,l=window.innerHeight,f=14,h=l/c*f,d=20,p=2,v=100,y=["#fafafa","#ffffcc","#ffe6ee","#e6f2ff","#e6ffe6","#fff0e6","#e6e6ff","#f9f2ec","#e6ffe6","#ff4d4d"],g=function e(t,n){a()(this,e),s()(this,"x",void 0),s()(this,"y",void 0),this.x=t,this.y=n},b=function(){function e(t){a()(this,e),s()(this,"INITIAL_SIZE",3),s()(this,"INITIAL_DIRECTION","Right"),s()(this,"INITIAL_POSITION",{x:1,y:1}),s()(this,"head",void 0),s()(this,"tail",void 0),s()(this,"directions",void 0),s()(this,"size",void 0),s()(this,"game",void 0),this.game=t,this.size=this.INITIAL_SIZE,this.directions=[this.INITIAL_DIRECTION],this.head=new g(this.INITIAL_POSITION.x,this.INITIAL_POSITION.y),this.tail=[]}return i()(e,[{key:"setDirection",value:function(e){var t=this.directions[this.directions.length-1];("Up"!==t||"Down"!==e&&"Up"!==e)&&("Down"!==t||"Up"!==e&&"Down"!==e)&&("Left"!==t||"Right"!==e&&"Left"!==e)&&("Right"!==t||"Left"!==e&&"Right"!==e)&&this.directions.push(e)}},{key:"move",value:function(){this.tail.push(this.head),this.head=this.getNext(),this.tail.length>this.size&&this.tail.splice(0,1)}},{key:"getNext",value:function(){switch(this.directions.length>1?this.directions.splice(0,1)[0]:this.directions[0]){case"Up":return new g(this.head.x,this.head.y-1);case"Right":return new g(this.head.x+1,this.head.y);case"Down":return new g(this.head.x,this.head.y+1);case"Left":return new g(this.head.x-1,this.head.y)}}},{key:"draw",value:function(e,t){var n=this.game.getConfiguration(),o=n.cellWidth,i=n.cellHeight,r=d*p/10,a=d*p/3,u=o*this.head.x,s=i*this.head.y;switch(t.fillStyle="#111111",t.fillRect(u,s,o,i),this.directions[0]){case"Up":t.beginPath(),t.arc(u+a,s+a,r,0,2*Math.PI,!1),t.arc(u+2*a,s+a,r,0,2*Math.PI,!1),t.fillStyle="white",t.fill();break;case"Down":t.beginPath(),t.arc(u+a,s+2*a,r,0,2*Math.PI,!1),t.arc(u+2*a,s+2*a,r,0,2*Math.PI,!1),t.fillStyle="white",t.fill();break;case"Right":t.beginPath(),t.arc(u+2*a,s+a,r,0,2*Math.PI,!1),t.arc(u+2*a,s+2*a,r,0,2*Math.PI,!1),t.fillStyle="white",t.fill();break;case"Left":t.beginPath(),t.arc(u+a,s+a,r,0,2*Math.PI,!1),t.arc(u+a,s+2*a,r,0,2*Math.PI,!1),t.fillStyle="white",t.fill()}t.fillStyle="#333333",this.tail.forEach(function(e){t.fillRect(o*e.x,i*e.y,o,i)})}},{key:"grow",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;this.size+=e}},{key:"shrink",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;this.size-=e}},{key:"getHead",value:function(){return this.head}},{key:"isWorm",value:function(e){return this.tail.find(function(t){return e.x===t.x&&e.y===t.y})}}]),e}(),w=function(){function e(t){a()(this,e),s()(this,"game",void 0),s()(this,"apples",void 0),this.game=t,this.apples=[],this.seed()}return i()(e,[{key:"seed",value:function(){for(var e=this.game.getConfiguration(),t=e.nbCellsX,n=e.nbCellsY,o=5*(e.level+1),i=0;i<o;i+=1){var r=Math.floor(Math.random()*t),a=Math.floor(Math.random()*n);this.apples.push(new g(r,a))}}},{key:"draw",value:function(e,t){var n=this.game.getConfiguration(),o=n.width,i=n.height,r=n.cellWidth,a=n.cellHeight;t.fillStyle="black",t.strokeStyle="#f1f1f1",t.lineWidth=1*p;for(var u=0;u<=o;u+=r)t.beginPath(),t.moveTo(u,0),t.lineTo(u,i),t.stroke();for(var s=0;s<=i;s+=a)t.beginPath(),t.moveTo(0,s),t.lineTo(o,s),t.stroke();t.fillStyle="red",this.apples.forEach(function(e){t.fillRect(r*e.x,a*e.y,r,a)})}},{key:"isApple",value:function(e){return this.apples.find(function(t){return e.x===t.x&&e.y===t.y})}},{key:"eat",value:function(e){this.apples=this.apples.filter(function(t){return e.x!==t.x||e.y!==t.y})}},{key:"isDone",value:function(){return 0===this.apples.length}}]),e}();(new(function(){function e(){a()(this,e),s()(this,"touch",void 0),s()(this,"canvas",void 0),s()(this,"score",0),s()(this,"running",!1),s()(this,"grid",void 0),s()(this,"worm",void 0),s()(this,"configuration",void 0),s()(this,"nextMove",void 0),this.canvas=canvas,document.body.appendChild(this.canvas),this.canvas.style.width="".concat(f*d),this.canvas.style.height="".concat(h*d),this.canvas.width=f*d*p,this.canvas.height=h*d*p,this.configuration={level:0,speed:v,width:this.canvas.width,height:this.canvas.height,nbCellsX:f,nbCellsY:h,cellWidth:this.canvas.width/f,cellHeight:this.canvas.height/h,color:y[0]},this.worm=new b(this),this.grid=new w(this),wx.onTouchStart(this.onTouchStart.bind(this)),wx.onTouchMove(this.onTouchMove.bind(this)),wx.onTouchEnd(this.onTouchEnd.bind(this))}return i()(e,[{key:"start",value:function(){this.nextMove=0,this.running=!0,requestAnimationFrame(this.loop.bind(this))}},{key:"stop",value:function(){this.running=!1}},{key:"getConfiguration",value:function(){return this.configuration}},{key:"loop",value:function(e){if(this.running&&(requestAnimationFrame(this.loop.bind(this)),e>=this.nextMove))switch(this.nextMove=e+this.configuration.speed,this.worm.move(),this.checkState()){case-1:this.die();break;case 1:this.worm.grow(),this.score+=100,this.grid.eat(this.worm.getHead()),this.grid.isDone()&&this.levelUp();default:this.paint(e)}}},{key:"paint",value:function(e){var t=this.configuration,n=t.width,o=t.height,i=t.color,r=(t.level,this.canvas.getContext("2d"));r.fillStyle=i,r.fillRect(0,0,n,o),this.grid.draw(e,r),this.worm.draw(e,r),r.font="".concat(35*p,"px Arial"),r.textAlign="left",r.textBaseline="top",r.fillStyle="rgba(0,0,0,1)",r.fillText(this.score.toString(),10*p,10*p)}},{key:"checkState",value:function(){var e=this.worm.getHead();return this.isOutside(e)||this.worm.isWorm(e)?-1:this.grid.isApple(e)?1:0}},{key:"levelUp",value:function(){this.score+=1e3,this.configuration.level+=1,this.configuration.level<10?(this.configuration.speed-=7,this.configuration.color=y[this.configuration.level],this.grid.seed()):this.win()}},{key:"win",value:function(){console.log("Congrats you beat the game!\r\n\r\nFinal Score: ".concat(this.score)),this.stop()}},{key:"die",value:function(){console.log("You died.\r\n\r\nFinal Score: ".concat(this.score)),this.stop()}},{key:"isOutside",value:function(e){var t=this.configuration,n=t.nbCellsX,o=t.nbCellsY;return e.x<0||e.x>=n||e.y<0||e.y>=o}},{key:"onTouchStart",value:function(e){this.touch=e.changedTouches[0]}},{key:"onTouchMove",value:function(e){}},{key:"onTouchEnd",value:function(e){var t=e.changedTouches[0],n=t.pageX-this.touch.pageX,o=t.pageY-this.touch.pageY,i=null;Math.abs(n)>=100?i=n<0?"Left":"Right":Math.abs(o)>=100&&(i=o<0?"Up":"Down"),i&&this.worm.setDirection(i)}}]),e}())).start()}]));